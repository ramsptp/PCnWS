<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Plant Collection - Plant Buddy</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
</head>
<body>

    <header class="header">
        <div class="header-logo">ðŸŒ± Plant Buddy</div>
        <div class="header-user">
            <span>Welcome, <strong sec:authentication="name">User</strong>!</span>
            <form th:action="@{/logout}" method="post" style="display: inline; margin: 0;">
                <button type="submit" class="btn-logout">Logout</button>
            </form>
        </div>
    </header>

    <main class="form-container">

        <div class="card plant-collection-card">
            <h2 class="card-title">
                My Plant Collection
                <a th:href="@{/add-plant}" class="btn-add-plant">+ Add New Plant</a>
            </h2>

            <a th:href="@{/}" class="btn-secondary" style="margin-bottom: 1.5rem; display: inline-block;">&larr; Back to Dashboard</a>

            <div class="plant-collection-grid">
                <div th:each="plant : ${plants}" class="plant-card">

                    <div class="plant-card-img-container">
                        <img th:if="${plant.imageUrl != null and plant.imageUrl != ''}" th:src="${plant.imageUrl}" alt="Plant" class="plant-card-img"/>
                        <div th:if="${plant.imageUrl == null or plant.imageUrl == ''}" class="plant-card-img-placeholder">ðŸŒ±</div>
                    </div>

                    <div class="plant-card-body">
                        <h3 th:text="${plant.plantName}">Fiddle Leaf Fig</h3>
                        <div class="plant-card-info">
                            <span>ðŸ’§ Water: Every <span th:text="${plant.wateringFrequencyDays}">X</span> days</span>
                            <span>ðŸŒ± Fertilize: Every <span th:text="${plant.fertilizingFrequencyDays}">X</span> days</span>
                        </div>
                    </div>
                    <div class="plant-card-actions">
                        <a th:href="@{/edit-plant/{id}(id=${plant.plantId})}" class="btn-edit">Edit</a>
                        <a th:href="@{/delete-plant/{id}(id=${plant.plantId})}"
                           onclick="return confirm('Are you sure you want to delete this plant?');"
                           class="btn-delete">Delete
                        </a>
                    </div>
                </div>
            </div>

            <div th:if="${plants.isEmpty()}" style="padding-top: 1rem;">
                <p>You haven't added any plants yet!</p>
            </div>

        </div>
    </main>

</body>
</html>